<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kavixo - Modern E-commerce</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f4f7f6; }
        .active-tab { color: #d63384; border-top: 3px solid #d63384; }
        .product-card { transition: transform 0.2s; position: relative; }
        .product-card:hover { transform: scale(1.02); }
        .hidden-section { display: none; }
        .share-btn {
            position: absolute; top: 8px; right: 8px; background: rgba(255, 255, 255, 0.9);
            width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center;
            justify-content: center; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.1); z-index: 10;
        }
        .share-btn:hover {
            background: rgba(255, 255, 255, 1);
            transform: scale(1.1);
            transition: transform 0.2s;
        }
        .wishlist-btn {
            position: absolute; top: 8px; left: 8px; background: rgba(255, 255, 255, 0.9);
            width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center;
            justify-content: center; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.1); z-index: 10;
        }
        .social-link { transition: 0.3s; }
        .social-link:hover { transform: translateY(-3px); opacity: 0.8; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        #order-modal, #share-modal { background: rgba(0,0,0,0.5); backdrop-filter: blur(5px); }
        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
        .notification {
            animation: slideIn 0.3s ease-out;
        }
        #share-modal {
            transition: opacity 0.3s ease;
        }
    </style>
</head>
<body class="pb-20">

    <header class="bg-white sticky top-0 z-50 shadow-sm p-4">
        <div class="flex justify-between items-center mb-3">
            <h1 class="text-2xl font-bold text-pink-600 cursor-pointer" onclick="window.location.href=window.location.pathname">Kavixo</h1>
            <div class="flex space-x-4">
                <div class="relative cursor-pointer" onclick="showSection('wishlist-section')">
                    <i class="fa-regular fa-heart text-2xl text-gray-700"></i>
                    <span class="absolute -top-2 -right-2 bg-pink-500 text-white text-xs rounded-full px-1.5" id="wishlist-count">0</span>
                </div>
                <div class="relative cursor-pointer" onclick="showSection('cart-section')">
                    <i class="fa-solid fa-cart-shopping text-2xl text-gray-700"></i>
                    <span class="absolute -top-2 -right-2 bg-pink-500 text-white text-xs rounded-full px-1.5" id="cart-count">0</span>
                </div>
            </div>
        </div>
        <div class="relative">
            <input type="text" id="search-input" placeholder="পছন্দের পণ্য খুঁজুন..." class="w-full p-2 pl-10 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-pink-400">
            <i class="fa-solid fa-magnifying-glass absolute left-4 top-3 text-gray-400"></i>
        </div>
    </header>

    <div id="notification-area" class="fixed top-20 right-4 z-[1000] space-y-2"></div>

    <!-- অর্ডার মোডাল -->
    <div id="order-modal" class="hidden fixed inset-0 z-[100] flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-sm rounded-2xl p-6 shadow-2xl">
            <h3 id="modal-product-name" class="font-bold text-lg mb-4 text-gray-800 border-b pb-2">পণ্যের অপশন</h3>
            
            <label class="block text-sm font-medium text-gray-600 mb-1">কালার পছন্দ করুন:</label>
            <input type="text" id="p-color" placeholder="যেমন: লাল, নীল" class="w-full p-2 mb-3 border rounded-lg outline-none focus:ring-1 focus:ring-pink-500">
            
            <label class="block text-sm font-medium text-gray-600 mb-1">সাইজ পছন্দ করুন:</label>
            <input type="text" id="p-size" placeholder="যেমন: M, L, XL" class="w-full p-2 mb-3 border rounded-lg outline-none focus:ring-1 focus:ring-pink-500">
            
            <label class="block text-sm font-medium text-gray-600 mb-1">পরিমাণ (কয়টি):</label>
            <input type="number" id="p-qty" value="1" min="1" class="w-full p-2 mb-6 border rounded-lg outline-none focus:ring-1 focus:ring-pink-500">
            
            <div class="flex space-x-3">
                <button onclick="closeModal()" class="flex-1 py-2 bg-gray-100 text-gray-600 rounded-lg font-medium">বাতিল</button>
                <button onclick="confirmQuickOrder()" class="flex-1 py-2 bg-pink-600 text-white rounded-lg font-medium shadow-md">যোগ করুন</button>
            </div>
        </div>
    </div>

    <!-- শেয়ার মোডাল -->
    <div id="share-modal" class="hidden fixed inset-0 z-[100] flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-sm rounded-2xl p-6 shadow-2xl">
            <h3 class="font-bold text-lg mb-4 text-gray-800 border-b pb-2">পণ্যটি শেয়ার করুন</h3>
            
            <div class="mb-6">
                <div class="flex items-center mb-3">
                    <input type="text" id="share-link-input" readonly class="w-full p-2 border rounded-lg bg-gray-50 text-sm mr-2">
                    <button onclick="copyShareLink()" class="bg-gray-200 p-2 rounded-lg hover:bg-gray-300 transition">
                        <i class="fa-solid fa-copy"></i>
                    </button>
                </div>
                <p class="text-xs text-gray-500 mb-4">উপরের লিংকটি কপি করুন অথবা সরাসরি শেয়ার করুন</p>
            </div>
            
            <div class="grid grid-cols-4 gap-3 mb-6">
                <button onclick="shareViaWhatsApp()" class="flex flex-col items-center p-3 bg-green-50 rounded-lg hover:bg-green-100 transition">
                    <i class="fa-brands fa-whatsapp text-green-600 text-2xl mb-1"></i>
                    <span class="text-xs">WhatsApp</span>
                </button>
                <button onclick="shareViaFacebook()" class="flex flex-col items-center p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition">
                    <i class="fa-brands fa-facebook text-blue-600 text-2xl mb-1"></i>
                    <span class="text-xs">Facebook</span>
                </button>
                <button onclick="shareViaMessenger()" class="flex flex-col items-center p-3 bg-blue-100 rounded-lg hover:bg-blue-200 transition">
                    <i class="fa-brands fa-facebook-messenger text-blue-700 text-2xl mb-1"></i>
                    <span class="text-xs">Messenger</span>
                </button>
                <button onclick="shareViaTelegram()" class="flex flex-col items-center p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition">
                    <i class="fa-brands fa-telegram text-blue-500 text-2xl mb-1"></i>
                    <span class="text-xs">Telegram</span>
                </button>
            </div>
            
            <div class="grid grid-cols-2 gap-3">
                <button onclick="closeShareModal()" class="py-2 bg-gray-100 text-gray-600 rounded-lg font-medium hover:bg-gray-200 transition">বন্ধ করুন</button>
                <button onclick="shareNative()" class="py-2 bg-pink-600 text-white rounded-lg font-medium shadow-md hover:bg-pink-700 transition">
                    <i class="fa-solid fa-share-alt mr-2"></i>শেয়ার করুন
                </button>
            </div>
        </div>
    </div>

    <div id="home-section">
        <section class="p-4 overflow-x-auto flex space-x-6 bg-white shadow-sm mb-2 no-scrollbar">
            <div class="text-center min-w-[70px] cursor-pointer" onclick="filterCategory('all')">
                <div class="bg-gray-100 p-4 rounded-full mb-1"><i class="fa-solid fa-border-all text-gray-600"></i></div>
                <p class="text-xs">সবগুলো</p>
            </div>
            <div class="text-center min-w-[70px] cursor-pointer" onclick="filterCategory('পোশাক')">
                <div class="bg-pink-100 p-4 rounded-full mb-1"><i class="fa-solid fa-shirt text-pink-600"></i></div>
                <p class="text-xs">পোশাক</p>
            </div>
            <div class="text-center min-w-[70px] cursor-pointer" onclick="filterCategory('মোবাইল')">
                <div class="bg-blue-100 p-4 rounded-full mb-1"><i class="fa-solid fa-mobile-screen text-blue-600"></i></div>
                <p class="text-xs">মোবাইল</p>
            </div>
            <div class="text-center min-w-[70px] cursor-pointer" onclick="filterCategory('ইলেকট্রনিক্স')">
                <div class="bg-orange-100 p-4 rounded-full mb-1"><i class="fa-solid fa-plug text-orange-600"></i></div>
                <p class="text-xs">গ্যাজেট</p>
            </div>
            <div class="text-center min-w-[70px] cursor-pointer" onclick="filterCategory('ওষুধ')">
                <div class="bg-green-100 p-4 rounded-full mb-1"><i class="fa-solid fa-pills text-green-600"></i></div>
                <p class="text-xs">ওষুধ</p>
            </div>
            <div class="text-center min-w-[70px] cursor-pointer" onclick="filterCategory('বাচ্চাদের খেলনা')">
                <div class="bg-yellow-100 p-4 rounded-full mb-1"><i class="fa-solid fa-baseball-bat-ball text-yellow-600"></i></div>
                <p class="text-xs">খেলনা</p>
            </div>
            <div class="text-center min-w-[70px] cursor-pointer" onclick="filterCategory('অন্যান্য')">
                <div class="bg-teal-100 p-4 rounded-full mb-1"><i class="fa-solid fa-box-archive text-teal-600"></i></div>
                <p class="text-xs">অন্যান্য</p>
            </div>
        </section>

        <div class="flex items-center justify-between bg-white p-3 mx-4 rounded-lg shadow-sm mb-4">
            <div class="flex items-center">
                <i class="fa-solid fa-filter text-pink-600 mr-2"></i>
                <select onchange="sortProducts(this.value)" class="p-2 border rounded text-sm">
                    <option value="default">সর্ট করুন</option>
                    <option value="price-low">কম দাম</option>
                    <option value="price-high">বেশি দাম</option>
                    <option value="name">নাম অনুসারে</option>
                </select>
            </div>
            <div class="bg-pink-600 text-white p-2 px-4 rounded-lg flex items-center">
                <span class="font-bold mr-2">ফ্ল্যাশ সেল</span>
                <div class="text-sm font-mono" id="timer">০৮:৪৫:১২</div>
            </div>
        </div>

        <main class="p-4 grid grid-cols-2 gap-4" id="product-list"></main>

        <footer class="bg-white mt-10 p-6 border-t text-center">
            <h3 class="text-gray-700 font-bold mb-4">আমাদের সাথে যুক্ত থাকুন</h3>
            <div class="flex justify-center space-x-8 mb-6">
                <a href="https://www.youtube.com/@ঝিন্টু পিন্টু" target="_blank" class="social-link text-red-600 text-3xl"><i class="fa-brands fa-youtube"></i></a>
                <a href="https://www.facebook.com/share/1Br2jeLkVB/" target="_blank" class="social-link text-blue-600 text-3xl"><i class="fa-brands fa-facebook"></i></a>
                <a href="https://www.tiktok.com/@sh.shop172" target="_blank" class="social-link text-black text-3xl"><i class="fa-brands fa-tiktok"></i></a>
            </div>
            <div class="w-full mt-4">
                <img src="https://i.ibb.co/Hfd2vdwF/image.jpg" alt="Footer Banner" class="w-full rounded-lg shadow-sm max-w-md mx-auto">
            </div>
            <p class="text-gray-400 text-[10px] mt-6 italic">© 2025 Kavixo - All Rights Reserved</p>
        </footer>
    </div>

    <div id="product-detail-section" class="hidden-section p-4">
        <button onclick="showSection('home-section')" class="mb-4 text-pink-600 font-bold flex items-center">
            <i class="fa-solid fa-arrow-left mr-2"></i> পিছনে
        </button>
        <div id="product-detail-content" class="bg-white rounded-xl shadow p-4"></div>
    </div>

    <div id="profile-section" class="hidden-section p-6 text-center">
        <div class="bg-white p-8 rounded-2xl shadow-md">
            <div class="w-32 h-32 mx-auto mb-4 relative">
                <img src="https://i.ibb.co/zVVbvYkv/image.jpg" alt="Owner" class="w-full h-full object-cover rounded-full border-4 border-pink-500 shadow-lg">
            </div>
            <h2 class="text-xl font-bold">Kavixo Founder</h2>
            <p class="text-pink-600 font-medium mb-4">Welcome to our Shop</p>
            <p class="text-gray-500 mb-6 text-sm">আপনার পছন্দের পণ্য খুঁজে পেতে আমাদের সাথেই থাকুন।</p>
            <button class="bg-pink-600 text-white px-8 py-2 rounded-full mb-4">Login Account</button>
            <button onclick="showSection('orders-section')" class="bg-gray-100 text-gray-700 px-8 py-2 rounded-full flex items-center justify-center mx-auto">
                <i class="fa-solid fa-box mr-2"></i>আমার অর্ডার
            </button>
        </div>
    </div>

    <div id="orders-section" class="hidden-section p-4">
        <h2 class="text-xl font-bold mb-4 flex items-center">
            <i class="fa-solid fa-clock-rotate-left mr-2"></i>পূর্বের অর্ডারসমূহ
        </h2>
        <button onclick="showSection('profile-section')" class="mb-4 text-pink-600 font-bold flex items-center">
            <i class="fa-solid fa-arrow-left mr-2"></i> পিছনে
        </button>
        <div id="orders-list" class="space-y-3"></div>
    </div>

    <div id="wishlist-section" class="hidden-section p-4">
        <h2 class="text-xl font-bold mb-4 flex items-center">
            <i class="fa-regular fa-heart mr-2 text-pink-600"></i>আমার পছন্দের তালিকা
        </h2>
        <button onclick="showSection('home-section')" class="mb-4 text-pink-600 font-bold flex items-center">
            <i class="fa-solid fa-arrow-left mr-2"></i> পিছনে
        </button>
        <div id="wishlist-items" class="grid grid-cols-2 gap-4"></div>
    </div>

    <div id="cart-section" class="hidden-section p-4">
        <h2 class="text-xl font-bold mb-4 flex items-center">
            <i class="fa-solid fa-bag-shopping mr-2"></i>অর্ডার লিস্ট ও তথ্য
        </h2>
        <div id="cart-items" class="bg-white p-4 rounded-lg shadow-sm mb-4"></div>
        <div id="order-form" class="bg-white p-4 rounded-lg shadow-sm">
            <h3 class="font-bold mb-3 border-b pb-2">ডেলিভারি তথ্য দিন</h3>
            <input type="text" id="cust-name" placeholder="আপনার নাম" class="w-full p-2 mb-2 border rounded">
            <input type="text" id="cust-address" placeholder="পুরো ঠিকানা (গ্রাম/শহর, জেলা)" class="w-full p-2 mb-2 border rounded">
            
            <div class="mb-2">
                <label class="block text-sm text-gray-600 mb-1">জেলা:</label>
                <select id="delivery-district" class="w-full p-2 border rounded" onchange="updateDeliveryCharge()">
                    <option value="">জেলা নির্বাচন করুন</option>
                    <option value="ঢাকা">ঢাকা</option>
                    <option value="চট্টগ্রাম">চট্টগ্রাম</option>
                    <option value="সিলেট">সিলেট</option>
                    <option value="রাজশাহী">রাজশাহী</option>
                    <option value="খুলনা">খুলনা</option>
                    <option value="বরিশাল">বরিশাল</option>
                    <option value="রংপুর">রংপুর</option>
                </select>
            </div>
            
            <input type="number" id="cust-phone" placeholder="সচল মোবাইল নাম্বার" class="w-full p-2 mb-3 border rounded">
            
            <div class="mb-3">
                <label class="block mb-2 font-medium">পেমেন্ট মেথড:</label>
                <div class="grid grid-cols-2 gap-2">
                    <label class="border p-3 rounded text-center cursor-pointer hover:bg-gray-50">
                        <input type="radio" name="payment" value="cash" checked class="mr-2">
                        ক্যাশ অন ডেলিভারি
                    </label>
                    <label class="border p-3 rounded text-center cursor-pointer hover:bg-gray-50">
                        <input type="radio" name="payment" value="bkash" class="mr-2">
                        bKash
                    </label>
                </div>
            </div>
            
            <div id="delivery-charge-info" class="mb-3 p-2 bg-gray-50 rounded text-sm hidden">
                <p>ডেলিভারি চার্জ: <span id="delivery-charge-amount" class="font-bold text-pink-600">০</span> টাকা</p>
                <p class="text-xs text-gray-500">মোট মূল্য + ডেলিভারি চার্জ</p>
            </div>
            
            <button onclick="placeOrder()" class="w-full bg-pink-600 text-white py-3 rounded-lg font-bold hover:bg-pink-700">অর্ডার কনফার্ম করুন</button>
        </div>
    </div>

    <nav class="fixed bottom-0 w-full bg-white border-t flex justify-around p-3 text-gray-500 shadow-lg z-50">
        <button onclick="showSection('home-section')" id="home-btn" class="nav-btn flex flex-col items-center active-tab">
            <i class="fa-solid fa-house"></i>
            <span class="text-xs">Home</span>
        </button>
        <button onclick="window.scrollTo({top: 0, behavior: 'smooth'}); showSection('home-section');" class="flex flex-col items-center">
            <i class="fa-solid fa-grid-2"></i>
            <span class="text-xs">Category</span>
        </button>
        <button onclick="showSection('wishlist-section')" class="flex flex-col items-center">
            <i class="fa-regular fa-heart"></i>
            <span class="text-xs">Wishlist</span>
        </button>
        <button onclick="showSection('cart-section')" class="flex flex-col items-center bg-pink-600 text-white w-12 h-12 rounded-full -mt-8 shadow-xl border-4 border-white">
            <i class="fa-solid fa-cart-shopping"></i>
        </button>
        <button onclick="showSection('profile-section')" id="profile-btn" class="nav-btn flex flex-col items-center">
            <i class="fa-solid fa-user"></i>
            <span class="text-xs">Profile</span>
        </button>
    </nav>

    <script>
        let cart = [];
        let allProducts = [];
        let tempProduct = null;
        let wishlist = JSON.parse(localStorage.getItem('kavixo_wishlist')) || [];
        let currentSharingProduct = null;

        // ২০টি নমুনা প্রোডাক্ট (সব ক্যাটাগরিতে)
        const demoProducts = [
            // পোশাক ক্যাটাগরির পণ্য (৫টি)
            { 
                id: 1,
                name: "ডিজাইনার থ্রি পিস", 
                price: 1850, 
                category: "পোশাক", 
                img: "https://images.unsplash.com/photo-1583391733956-6c78276477e2?w=400", 
                discount: "15%",
                description: "উচ্চমানের সুতি কাপড়ের থ্রি পিস। কালার অপশন: লাল, নীল, সাদা, কালো। সাইজ: S, M, L, XL। বাংলাদেশি ডিজাইনের ফ্যাশনেবল থ্রি পিস।"
            },
            { 
                id: 2,
                name: "শাড়ি ব্লাউজ সেট", 
                price: 2850, 
                category: "পোশাক", 
                img: "https://images.unsplash.com/photo-1585487000160-6eb9ce6b5aae?w=400", 
                discount: "12%",
                description: "সিল্ক শাড়ি সাথে ম্যাচিং ব্লাউজ। হাতে তৈরি জরির কাজ, পারফেক্ট বাংলাদেশি উৎসবের জন্য। কালার অপশন: লাল, গোলাপি, নীল।"
            },
            { 
                id: 3,
                name: "শীতের সোয়েটার", 
                price: 1250, 
                category: "পোশাক", 
                img: "https://images.unsplash.com/photo-1576566588028-4147f3842f27?w=400", 
                discount: "20%",
                description: "উলের তৈরি উষ্ণ সোয়েটার। বিভিন্ন ডিজাইন ও কালারে পাওয়া যায়। শীতের জন্য পারফেক্ট।"
            },
            { 
                id: 4,
                name: "জিন্স প্যান্ট", 
                price: 1450, 
                category: "পোশাক", 
                img: "https://images.unsplash.com/photo-1542272604-787c3835535d?w=400", 
                discount: "10%",
                description: "হাই কোয়ালিটি ডেনিম জিন্স। বিভিন্ন সাইজে পাওয়া যায়। কমফর্টেবল ও টেকসই।"
            },
            { 
                id: 5,
                name: "টি-শার্ট কাপল সেট", 
                price: 850, 
                category: "পোশাক", 
                img: "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=400", 
                discount: "25%",
                description: "২টি ম্যাচিং টি-শার্ট। কটন ফেব্রিক, বিভিন্ন ডিজাইন। পারফেক্ট কাপল গিফট।"
            },

            // মোবাইল ক্যাটাগরির পণ্য (৩টি)
            { 
                id: 6,
                name: "স্মার্টফোন Galaxy A25", 
                price: 28999, 
                category: "মোবাইল", 
                img: "https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=400", 
                discount: "8%",
                description: "৬.৭ ইঞ্চি AMOLED ডিসপ্লে, ৮জিবি র‍্যাম, ২৫৬জিবি স্টোরেজ, ৫০০০ এমএএইচ ব্যাটারি, ৫০MP ক্যামেরা। ২ বছর ওয়ারেন্টি সহ।"
            },
            { 
                id: 7,
                name: "পাওয়ার ব্যাংক 20000mAh", 
                price: 1650, 
                category: "মোবাইল", 
                img: "https://images.unsplash.com/photo-1588872657578-7efd1f1555ed?w=400", 
                discount: "15%",
                description: "২০০০০mAh ক্যাপাসিটি, ১৮W ফাস্ট চার্জিং, ৩ আউটপুট পোর্ট, LED ডিসপ্লে। ৬ মাস ওয়ারেন্টি সহ।"
            },
            { 
                id: 8,
                name: "মোবাইল কভার কलेকশন", 
                price: 350, 
                category: "মোবাইল", 
                img: "https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?w=400", 
                discount: "30%",
                description: "প্রিমিয়াম কোয়ালিটি মোবাইল কভার। বিভিন্ন মডেলের জন্য। শকপ্রুফ ও স্ক্র্যাচ রেসিস্ট্যান্ট।"
            },

            // ইলেকট্রনিক্স ক্যাটাগরির পণ্য (৪টি)
            { 
                id: 9,
                name: "গেমিং হেডফোন Pro", 
                price: 1899, 
                category: "ইলেকট্রনিক্স", 
                img: "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400", 
                discount: "25%",
                description: "৭.১ চ্যানেল সাউন্ড, RGB লাইটিং, নোইজ ক্যান্সেলেশন মাইক্রোফোন, ২০ ঘন্টা ব্যাটারি লাইফ। গেমারদের জন্য পারফেক্ট চয়েস।"
            },
            { 
                id: 10,
                name: "স্মার্টওয়াচ GT3", 
                price: 3250, 
                category: "ইলেকট্রনিক্স", 
                img: "https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400", 
                discount: "12%",
                description: "১.৭৫ ইঞ্চি AMOLED ডিস্প্লে, হার্ট রেট মনিটর, স্লিপ ট্র্যাকিং, ৫ ATM ওয়াটারপ্রুফ, ৭ দিন ব্যাটারি লাইফ।"
            },
            { 
                id: 11,
                name: "ব্লুটুথ স্পিকার", 
                price: 1350, 
                category: "ইলেকট্রনিক্স", 
                img: "https://images.unsplash.com/photo-1546435770-a3e426bf472b?w=400", 
                discount: "17%",
                description: "২০W সাউন্ড আউটপুট, ১৫ ঘন্টা ব্যাটারি, IPX7 ওয়াটারপ্রুফ, হ্যান্ডসফ্রি কলিং, RGB লাইটিং।"
            },
            { 
                id: 12,
                name: "ডুয়াল ব্যান্ড রাউটার", 
                price: 2450, 
                category: "ইলেকট্রনিক্স", 
                img: "https://images.unsplash.com/photo-1563013544-824ae1b704d3?w=400", 
                discount: "10%",
                description: "WiFi 6 সাপোর্ট, ৪টি হাই-গেইন অ্যান্টেনা, ৫০+ ডিভাইস কানেকশন, প্যারেন্টাল কন্ট্রোল। ৩ বছর ওয়ারেন্টি।"
            },

            // ওষুধ ক্যাটাগরির পণ্য (৪টি)
            { 
                id: 13,
                name: "প্যারাসিটামল ৫০০mg", 
                price: 45, 
                category: "ওষুধ", 
                img: "https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=400", 
                discount: "5%",
                description: "জ্বর ও ব্যথা নাশক ওষুধ। ১০টি স্ট্রিপ। ডাক্তারের পরামর্শ অনুযায়ী সেবন করুন।"
            },
            { 
                id: 14,
                name: "ভিটামিন সি ট্যাবলেট", 
                price: 120, 
                category: "ওষুধ", 
                img: "https://images.unsplash.com/photo-1584308666744-24d5c474f2ae?w=400", 
                discount: "15%",
                description: "ইমিউনিটি বুস্টার। ৩০টি ট্যাবলেট। প্রতিদিন ১টি করে সেবন করুন।"
            },
            { 
                id: 15,
                name: "অ্যান্টিসেপটিক ক্রিম", 
                price: 85, 
                category: "ওষুধ", 
                img: "https://images.unsplash.com/photo-1552902865-b72c031ac5ea?w=400", 
                discount: "10%",
                description: "ক্ষত নিরাময় ক্রিম। ব্যাকটেরিয়া প্রতিরোধক। ৩০ গ্রাম টিউব।"
            },
            { 
                id: 16,
                name: "মাল্টিভিটামিন সিরাপ", 
                price: 180, 
                category: "ওষুধ", 
                img: "https://images.unsplash.com/photo-1603398938378-e54eab446dde?w=400", 
                discount: "12%",
                description: "বাচ্চাদের জন্য মাল্টিভিটামিন সিরাপ। ২০০ml বোতল। স্বাদ: কমলা।"
            },

            // বাচ্চাদের খেলনা ক্যাটাগরির পণ্য (৪টি)
            { 
                id: 17,
                name: "এডুকেশনাল ব্লকস", 
                price: 650, 
                category: "বাচ্চাদের খেলনা", 
                img: "https://images.unsplash.com/photo-1596461404969-9ae70f2830c1?w=400", 
                discount: "20%",
                description: "৫০ পিসেস রঙিন ব্লকস। বাচ্চাদের মেন্টাল ডেভেলপমেন্টের জন্য। বয়স: ২-৬ বছর।"
            },
            { 
                id: 18,
                name: "রিমোট কন্ট্রোল কার", 
                price: 850, 
                category: "বাচ্চাদের খেলনা", 
                img: "https://images.unsplash.com/photo-1559056199-641a0ac8b55e?w=400", 
                discount: "15%",
                description: "রিমোট কন্ট্রোল কার। ২০ মিটার রেঞ্জ। রিচার্জেবল ব্যাটারি। বয়স: ৩+ বছর।"
            },
            { 
                id: 19,
                name: "স্টাফড টেডি বিয়ার", 
                price: 450, 
                category: "বাচ্চাদের খেলনা", 
                img: "https://images.unsplash.com/photo-1535585209827-a15fcdbc4c2d?w=400", 
                discount: "25%",
                description: "নরম ও সুন্দর টেডি বিয়ার। উচ্চতা: ১২ ইঞ্চি। হাইপোঅ্যালার্জেনিক উপাদান।"
            },
            { 
                id: 20,
                name: "ডিজাইনিং সেট", 
                price: 550, 
                category: "বাচ্চাদের খেলনা", 
                img: "https://images.unsplash.com/photo-1587654780298-8c6d6b2c8b1a?w=400", 
                discount: "18%",
                description: "ক্রিয়েটিভ ডিজাইনিং সেট। কালার পেন্সিল, স্কেচবুক, স্টিকার। বয়স: ৪+ বছর।"
            }
        ];

        // নোটিফিকেশন ফাংশন
        function showNotification(message, type = 'success') {
            const notificationArea = document.getElementById('notification-area');
            const notification = document.createElement('div');
            notification.className = `notification p-4 rounded-lg shadow-lg ${type === 'success' ? 'bg-green-500' : 'bg-red-500'} text-white`;
            notification.innerHTML = `<p class="font-medium">${message}</p>`;
            notificationArea.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // সেকশন শো ফাংশন
        function showSection(sectionId) {
            document.getElementById('home-section').classList.add('hidden-section');
            document.getElementById('cart-section').classList.add('hidden-section');
            document.getElementById('profile-section').classList.add('hidden-section');
            document.getElementById('product-detail-section').classList.add('hidden-section');
            document.getElementById('orders-section').classList.add('hidden-section');
            document.getElementById('wishlist-section').classList.add('hidden-section');
            
            document.getElementById(sectionId).classList.remove('hidden-section');
            
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active-tab'));
            
            if(sectionId === 'home-section') {
                document.getElementById('home-btn').classList.add('active-tab');
            }
            if(sectionId === 'profile-section') {
                document.getElementById('profile-btn').classList.add('active-tab');
            }
            
            if(sectionId === 'orders-section') {
                loadOrderHistory();
            }
            if(sectionId === 'wishlist-section') {
                loadWishlist();
            }
        }

        // প্রোডাক্ট লোড ফাংশন
        function loadProducts(filter = 'all') {
            let savedProducts = JSON.parse(localStorage.getItem('kavixo_products'));
            allProducts = (savedProducts && savedProducts.length > 0) ? savedProducts : demoProducts;
            
            const productContainer = document.getElementById('product-list');
            productContainer.innerHTML = "";

            const urlParams = new URLSearchParams(window.location.search);
            const sharedProductName = urlParams.get('p');

            let filtered;
            if (sharedProductName) {
                filtered = allProducts.filter(p => p.name === sharedProductName);
                productContainer.innerHTML = `<button onclick="window.location.href=window.location.pathname" class="col-span-2 text-pink-600 font-bold mb-4 text-sm"><i class="fa-solid fa-arrow-left"></i> সব পণ্য দেখুন</button>`;
            } else {
                filtered = filter === 'all' ? allProducts : allProducts.filter(p => p.category === filter);
            }

            if(filtered.length === 0) {
                productContainer.innerHTML += "<p class='col-span-2 text-center text-gray-400 py-10'>কোনো পণ্য পাওয়া যায়নি।</p>";
                return;
            }

            filtered.forEach(p => {
                const isWishlisted = wishlist.some(item => item.id === p.id);
                productContainer.innerHTML += `
                    <div class="bg-white rounded-xl shadow-sm overflow-hidden product-card border">
                        <div class="relative">
                            <img src="${p.img}" class="w-full h-40 object-cover" onerror="this.src='https://via.placeholder.com/150'">
                            <span class="absolute top-2 left-2 bg-red-500 text-white text-[10px] px-2 py-0.5 rounded">${p.discount || '0%'} OFF</span>
                            <div class="wishlist-btn" onclick="toggleWishlist(${p.id})">
                                <i class="${isWishlisted ? 'fa-solid text-red-500' : 'fa-regular'} fa-heart"></i>
                            </div>
                            <div class="share-btn" onclick="openShareModal('${p.name}')">
                                <i class="fa-solid fa-share-nodes text-gray-600 text-sm"></i>
                            </div>
                        </div>
                        <div class="p-3">
                            <h3 class="text-sm font-semibold truncate">${p.name}</h3>
                            <p class="text-pink-600 font-bold mt-1">৳ ${p.price}</p>
                            <div class="flex space-x-2 mt-2">
                                <button onclick="showProductDetail(${p.id})" class="flex-1 bg-gray-100 text-gray-700 py-1 rounded text-sm font-medium">বিস্তারিত</button>
                                <button onclick="openOrderModal('${p.name}', ${p.price})" class="flex-1 bg-pink-600 text-white py-1 rounded text-sm font-medium">অর্ডার</button>
                            </div>
                        </div>
                    </div>
                `;
            });
        }

        // প্রোডাক্ট ডিটেইল ফাংশন
        function showProductDetail(productId) {
            const product = allProducts.find(p => p.id === productId);
            if(!product) return;
            
            const isWishlisted = wishlist.some(item => item.id === product.id);
            
            document.getElementById('product-detail-content').innerHTML = `
                <img src="${product.img}" class="w-full h-64 object-cover rounded-lg mb-4">
                <div class="flex justify-between items-start mb-2">
                    <h2 class="text-xl font-bold">${product.name}</h2>
                    <div class="flex space-x-2">
                        <button onclick="openShareModal('${product.name}')" class="text-gray-600">
                            <i class="fa-solid fa-share-nodes"></i>
                        </button>
                        <button onclick="toggleWishlist(${product.id})" class="text-2xl ${isWishlisted ? 'text-red-500' : 'text-gray-400'}">
                            <i class="${isWishlisted ? 'fa-solid' : 'fa-regular'} fa-heart"></i>
                        </button>
                    </div>
                </div>
                <div class="flex items-center justify-between mb-4">
                    <div>
                        <p class="text-2xl font-bold text-pink-600">৳ ${product.price}</p>
                        <p class="text-sm text-gray-500 line-through">আসল মূল্য: ৳ ${Math.round(product.price / (1 - parseInt(product.discount)/100))}</p>
                    </div>
                    <span class="bg-red-500 text-white px-3 py-1 rounded-full text-sm">
                        ${product.discount || '0%'} ছাড়
                    </span>
                </div>
                <div class="mb-6">
                    <h4 class="font-bold mb-2 text-lg">বিস্তারিত:</h4>
                    <p class="text-gray-600 leading-relaxed">${product.description}</p>
                </div>
                <div class="grid grid-cols-2 gap-2">
                    <button onclick="showSection('home-section')" class="bg-gray-100 text-gray-700 py-3 rounded-lg font-medium">
                        <i class="fa-solid fa-arrow-left mr-1"></i> ফিরে যান
                    </button>
                    <button onclick="openOrderModal('${product.name}', ${product.price})" 
                            class="bg-pink-600 text-white py-3 rounded-lg font-bold">
                        <i class="fa-solid fa-cart-plus mr-1"></i> অর্ডার করুন
                    </button>
                </div>
            `;
            showSection('product-detail-section');
        }

        // উইশলিস্ট ফাংশন
        function toggleWishlist(productId) {
            const product = allProducts.find(p => p.id === productId);
            if(!product) return;
            
            const index = wishlist.findIndex(item => item.id === productId);
            
            if(index === -1) {
                wishlist.push(product);
                showNotification('উইশলিস্টে যোগ হয়েছে!', 'success');
            } else {
                wishlist.splice(index, 1);
                showNotification('উইশলিস্ট থেকে সরানো হয়েছে', 'info');
            }
            
            localStorage.setItem('kavixo_wishlist', JSON.stringify(wishlist));
            updateWishlistCount();
            loadProducts();
        }

        // উইশলিস্ট লোড ফাংশন
        function loadWishlist() {
            const container = document.getElementById('wishlist-items');
            
            if(wishlist.length === 0) {
                container.innerHTML = '<p class="col-span-2 text-center text-gray-400 py-10">আপনার উইশলিস্টে কোনো পণ্য নেই</p>';
                return;
            }
            
            container.innerHTML = wishlist.map(p => `
                <div class="bg-white rounded-xl shadow-sm overflow-hidden product-card border">
                    <div class="relative">
                        <img src="${p.img}" class="w-full h-40 object-cover">
                        <span class="absolute top-2 left-2 bg-red-500 text-white text-[10px] px-2 py-0.5 rounded">${p.discount || '0%'} OFF</span>
                        <div class="wishlist-btn" onclick="toggleWishlist(${p.id})">
                            <i class="fa-solid fa-heart text-red-500"></i>
                        </div>
                    </div>
                    <div class="p-3">
                        <h3 class="text-sm font-semibold truncate">${p.name}</h3>
                        <p class="text-pink-600 font-bold mt-1">৳ ${p.price}</p>
                        <div class="flex space-x-2 mt-2">
                            <button onclick="showProductDetail(${p.id})" class="flex-1 bg-gray-100 text-gray-700 py-1 rounded text-sm font-medium">বিস্তারিত</button>
                            <button onclick="openOrderModal('${p.name}', ${p.price})" class="flex-1 bg-pink-600 text-white py-1 rounded text-sm font-medium">অর্ডার</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // উইশলিস্ট কাউন্ট আপডেট
        function updateWishlistCount() {
            document.getElementById('wishlist-count').innerText = wishlist.length;
        }

        // অর্ডার মোডাল ফাংশন
        function openOrderModal(name, price) {
            tempProduct = { name, price };
            document.getElementById('modal-product-name').innerText = name;
            document.getElementById('order-modal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('order-modal').classList.add('hidden');
            document.getElementById('p-color').value = '';
            document.getElementById('p-size').value = '';
            document.getElementById('p-qty').value = '1';
        }

        function confirmQuickOrder() {
            const color = document.getElementById('p-color').value || "উল্লেখ নেই";
            const size = document.getElementById('p-size').value || "উল্লেখ নেই";
            const qty = document.getElementById('p-qty').value || 1;

            cart.push({ 
                name: tempProduct.name, 
                price: tempProduct.price,
                color: color,
                size: size,
                qty: parseInt(qty)
            });

            updateCartUI();
            closeModal();
            showSection('cart-section');
            showNotification('পণ্য কার্টে যোগ হয়েছে!', 'success');
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        // কার্ট ফাংশন
        function updateCartUI() {
            document.getElementById('cart-count').innerText = cart.length;
            const itemsDiv = document.getElementById('cart-items');
            
            if(cart.length === 0) { 
                itemsDiv.innerHTML = '<p class="text-center py-4 text-gray-400">আপনার লিস্টে কোনো পণ্য নেই।</p>'; 
                document.getElementById('delivery-charge-info').classList.add('hidden');
                return; 
            }
            
            let total = 0;
            itemsDiv.innerHTML = cart.map((item, i) => {
                const subtotal = item.price * item.qty;
                total += subtotal;
                return `<div class="flex justify-between items-center mb-3 border-b pb-2">
                    <div class="flex-1">
                        <p class="font-medium text-sm">${item.name}</p>
                        <p class="text-[10px] text-gray-500">কালার: ${item.color} | সাইজ: ${item.size} | পরিমাণ: ${item.qty}</p>
                        <p class="text-pink-600 text-xs font-bold">৳ ${item.price} x ${item.qty} = ৳ ${subtotal}</p>
                    </div>
                    <button onclick="removeFromCart(${i})" class="text-red-400 ml-2 hover:text-red-600">
                        <i class="fa-solid fa-trash-can"></i>
                    </button>
                </div>`;
            }).join("") + `<div class="text-right font-bold text-lg mt-4 text-pink-600">মোট মূল্য: ৳ ${total}</div>`;
            
            updateDeliveryCharge();
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartUI();
            showNotification('পণ্য কার্ট থেকে সরানো হয়েছে', 'info');
        }

        // শেয়ার সিস্টেম ফাংশন
        function openShareModal(productName) {
            currentSharingProduct = productName;
            const shareUrl = generateProductShareLink(productName);
            document.getElementById('share-link-input').value = shareUrl;
            document.getElementById('share-modal').classList.remove('hidden');
        }

        function closeShareModal() {
            document.getElementById('share-modal').classList.add('hidden');
            currentSharingProduct = null;
        }

        function generateProductShareLink(productName) {
            const baseUrl = window.location.origin + window.location.pathname;
            const product = allProducts.find(p => p.name === productName);
            
            if (product) {
                return `${baseUrl}?share=true&product=${product.id}`;
            }
            
            return `${baseUrl}?share=true&name=${encodeURIComponent(productName)}`;
        }

        function copyShareLink() {
            const shareInput = document.getElementById('share-link-input');
            shareInput.select();
            shareInput.setSelectionRange(0, 99999);
            
            try {
                navigator.clipboard.writeText(shareInput.value);
                showNotification('লিংক কপি হয়েছে!', 'success');
            } catch (err) {
                document.execCommand('copy');
                showNotification('লিংক কপি হয়েছে!', 'success');
            }
        }

        function shareViaWhatsApp() {
            const shareUrl = document.getElementById('share-link-input').value;
            const text = `Kavixo থেকে এই পণ্যটি দেখুন: ${currentSharingProduct}`;
            window.open(`https://wa.me/?text=${encodeURIComponent(text + '\n' + shareUrl)}`, '_blank');
        }

        function shareViaFacebook() {
            const shareUrl = encodeURIComponent(document.getElementById('share-link-input').value);
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${shareUrl}`, '_blank', 'width=600,height=400');
        }

        function shareViaMessenger() {
            const shareUrl = encodeURIComponent(document.getElementById('share-link-input').value);
            window.open(`fb-messenger://share?link=${shareUrl}`, '_blank');
        }

        function shareViaTelegram() {
            const shareUrl = document.getElementById('share-link-input').value;
            const text = `Kavixo থেকে এই পণ্যটি দেখুন: ${currentSharingProduct}`;
            window.open(`https://t.me/share/url?url=${encodeURIComponent(shareUrl)}&text=${encodeURIComponent(text)}`, '_blank');
        }

        function shareNative() {
            const shareUrl = document.getElementById('share-link-input').value;
            const shareData = {
                title: 'Kavixo - E-commerce',
                text: `${currentSharingProduct} - এই পণ্যটি দেখুন Kavixo থেকে`,
                url: shareUrl
            };
            
            if (navigator.share) {
                navigator.share(shareData)
                    .then(() => showNotification('সফলভাবে শেয়ার হয়েছে!', 'success'))
                    .catch(err => console.log('শেয়ার বাতিল হয়েছে:', err));
            } else {
                showNotification('এই ডিভাইসে শেয়ার সাপোর্ট করা হয় না', 'info');
            }
        }

        function loadSharedProductFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            
            if (urlParams.has('share')) {
                const productId = urlParams.get('product');
                const productName = urlParams.get('name');
                
                let product = null;
                
                if (productId) {
                    product = allProducts.find(p => p.id == productId);
                } else if (productName) {
                    product = allProducts.find(p => p.name === decodeURIComponent(productName));
                }
                
                if (product) {
                    const cleanUrl = window.location.origin + window.location.pathname + '?share=true&product=' + product.id;
                    window.history.replaceState({}, document.title, cleanUrl);
                    
                    setTimeout(() => {
                        showProductDetail(product.id);
                        showNotification(`শেয়ার করা পণ্য: ${product.name}`, 'success');
                    }, 500);
                }
            }
        }

        // সার্চ ফাংশন
        function searchProducts() {
            const term = document.getElementById('search-input').value.toLowerCase();
            const filtered = allProducts.filter(p => 
                p.name.toLowerCase().includes(term) || 
                p.category.toLowerCase().includes(term) ||
                p.description.toLowerCase().includes(term)
            );
            
            const productContainer = document.getElementById('product-list');
            productContainer.innerHTML = "";
            
            if(filtered.length === 0) {
                productContainer.innerHTML = '<p class="col-span-2 text-center text-gray-400 py-10">কোনো পণ্য পাওয়া যায়নি</p>';
                return;
            }
            
            filtered.forEach(p => {
                const isWishlisted = wishlist.some(item => item.id === p.id);
                productContainer.innerHTML += `
                    <div class="bg-white rounded-xl shadow-sm overflow-hidden product-card border">
                        <div class="relative">
                            <img src="${p.img}" class="w-full h-40 object-cover" onerror="this.src='https://via.placeholder.com/150'">
                            <span class="absolute top-2 left-2 bg-red-500 text-white text-[10px] px-2 py-0.5 rounded">${p.discount || '0%'} OFF</span>
                            <div class="wishlist-btn" onclick="toggleWishlist(${p.id})">
                                <i class="${isWishlisted ? 'fa-solid text-red-500' : 'fa-regular'} fa-heart"></i>
                            </div>
                            <div class="share-btn" onclick="openShareModal('${p.name}')">
                                <i class="fa-solid fa-share-nodes text-gray-600 text-sm"></i>
                            </div>
                        </div>
                        <div class="p-3">
                            <h3 class="text-sm font-semibold truncate">${p.name}</h3>
                            <p class="text-pink-600 font-bold mt-1">৳ ${p.price}</p>
                            <div class="flex space-x-2 mt-2">
                                <button onclick="showProductDetail(${p.id})" class="flex-1 bg-gray-100 text-gray-700 py-1 rounded text-sm font-medium">বিস্তারিত</button>
                                <button onclick="openOrderModal('${p.name}', ${p.price})" class="flex-1 bg-pink-600 text-white py-1 rounded text-sm font-medium">অর্ডার</button>
                            </div>
                        </div>
                    </div>
                `;
            });
        }

        // ক্যাটাগরি ফিল্টার
        function filterCategory(cat) { 
            showSection('home-section'); 
            loadProducts(cat); 
        }

        // সর্ট ফাংশন
        function sortProducts(sortBy) {
            let sortedProducts = [...allProducts];
            
            switch(sortBy) {
                case 'price-low':
                    sortedProducts.sort((a, b) => a.price - b.price);
                    break;
                case 'price-high':
                    sortedProducts.sort((a, b) => b.price - a.price);
                    break;
                case 'name':
                    sortedProducts.sort((a, b) => a.name.localeCompare(b.name));
                    break;
                default:
                    break;
            }
            
            const productContainer = document.getElementById('product-list');
            productContainer.innerHTML = "";
            
            sortedProducts.forEach(p => {
                const isWishlisted = wishlist.some(item => item.id === p.id);
                productContainer.innerHTML += `
                    <div class="bg-white rounded-xl shadow-sm overflow-hidden product-card border">
                        <div class="relative">
                            <img src="${p.img}" class="w-full h-40 object-cover" onerror="this.src='https://via.placeholder.com/150'">
                            <span class="absolute top-2 left-2 bg-red-500 text-white text-[10px] px-2 py-0.5 rounded">${p.discount || '0%'} OFF</span>
                            <div class="wishlist-btn" onclick="toggleWishlist(${p.id})">
                                <i class="${isWishlisted ? 'fa-solid text-red-500' : 'fa-regular'} fa-heart"></i>
                            </div>
                            <div class="share-btn" onclick="openShareModal('${p.name}')">
                                <i class="fa-solid fa-share-nodes text-gray-600 text-sm"></i>
                            </div>
                        </div>
                        <div class="p-3">
                            <h3 class="text-sm font-semibold truncate">${p.name}</h3>
                            <p class="text-pink-600 font-bold mt-1">৳ ${p.price}</p>
                            <div class="flex space-x-2 mt-2">
                                <button onclick="showProductDetail(${p.id})" class="flex-1 bg-gray-100 text-gray-700 py-1 rounded text-sm font-medium">বিস্তারিত</button>
                                <button onclick="openOrderModal('${p.name}', ${p.price})" class="flex-1 bg-pink-600 text-white py-1 rounded text-sm font-medium">অর্ডার</button>
                            </div>
                        </div>
                    </div>
                `;
            });
        }

        // ডেলিভারি চার্জ ক্যালকুলেশন
        function updateDeliveryCharge() {
            const district = document.getElementById('delivery-district').value;
            const deliveryChargeInfo = document.getElementById('delivery-charge-info');
            
            if (!district || cart.length === 0) {
                deliveryChargeInfo.classList.add('hidden');
                return;
            }
            
            const charges = {
                'ঢাকা': 60,
                'চট্টগ্রাম': 80,
                'সিলেট': 100,
                'রাজশাহী': 90,
                'খুলনা': 85,
                'বরিশাল': 95,
                'রংপুর': 110
            };
            
            const charge = charges[district] || 120;
            document.getElementById('delivery-charge-amount').innerText = charge;
            
            let subtotal = cart.reduce((total, item) => total + (item.price * item.qty), 0);
            let totalWithDelivery = subtotal + charge;
            
            const totalElement = document.querySelector('#cart-items .text-right');
            if (totalElement) {
                totalElement.innerHTML = `
                    <div class="text-right">
                        <p class="text-gray-600 text-sm">সাবটোটাল: ৳ ${subtotal}</p>
                        <p class="text-gray-600 text-sm">ডেলিভারি চার্জ: ৳ ${charge}</p>
                        <p class="font-bold text-lg mt-2 text-pink-600">মোট মূল্য: ৳ ${totalWithDelivery}</p>
                    </div>
                `;
            }
            
            deliveryChargeInfo.classList.remove('hidden');
        }

        // অর্ডার হিস্ট্রি
        function loadOrderHistory() {
            const orders = JSON.parse(localStorage.getItem('kavixo_orders')) || [];
            const container = document.getElementById('orders-list');
            
            if(orders.length === 0) {
                container.innerHTML = '<p class="text-center py-8 text-gray-400">কোনো অর্ডার নেই</p>';
                return;
            }
            
            container.innerHTML = orders.reverse().map(order => {
                const orderDate = new Date(order.date || Date.now()).toLocaleDateString('bn-BD');
                return `
                    <div class="bg-white p-4 rounded-lg shadow-sm border">
                        <div class="flex justify-between mb-2">
                            <span class="font-bold text-pink-600">${order.id}</span>
                            <span class="text-pink-600 font-bold">৳ ${order.total}</span>
                        </div>
                        <p class="text-sm text-gray-600 mb-1">
                            <i class="fa-solid fa-user mr-1"></i> ${order.customer}
                        </p>
                        <p class="text-sm text-gray-600 mb-1">
                            <i class="fa-solid fa-phone mr-1"></i> ${order.phone}
                        </p>
                        <p class="text-xs text-gray-500 mt-1 mb-2">
                            <i class="fa-solid fa-location-dot mr-1"></i> ${order.address.substring(0, 50)}...
                        </p>
                        <div class="border-t pt-2">
                            <p class="text-xs text-gray-400">
                                <i class="fa-solid fa-calendar mr-1"></i> ${orderDate}
                            </p>
                            <p class="text-xs text-green-600 font-medium mt-1">
                                <i class="fa-solid fa-check-circle mr-1"></i> অর্ডার সম্পন্ন হয়েছে
                            </p>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // অর্ডার প্লেস
        function placeOrder() {
            const name = document.getElementById('cust-name').value.trim();
            const address = document.getElementById('cust-address').value.trim();
            const phone = document.getElementById('cust-phone').value.trim();
            const district = document.getElementById('delivery-district').value;
            
            if(cart.length === 0) {
                showNotification('আপনার কার্টে কোনো পণ্য নেই!', 'error');
                return;
            }
            
            if(!name || !address || !phone) {
                showNotification('অনুগ্রহ করে আপনার নাম, ঠিকানা এবং মোবাইল নাম্বার সঠিক ভাবে দিন।', 'error');
                return;
            }
            
            if(!district) {
                showNotification('অনুগ্রহ করে ডেলিভারি জেলা নির্বাচন করুন।', 'error');
                return;
            }
            
            if(phone.length !== 11 || !phone.startsWith('01')) {
                showNotification('সঠিক মোবাইল নাম্বার দিন (১১ ডিজিট, ০১ দিয়ে শুরু)', 'error');
                return;
            }
            
            const charges = {
                'ঢাকা': 60, 'চট্টগ্রাম': 80, 'সিলেট': 100,
                'রাজশাহী': 90, 'খুলনা': 85, 'বরিশাল': 95, 'রংপুর': 110
            };
            const deliveryCharge = charges[district] || 120;
            
            const subtotal = cart.reduce((total, item) => total + (item.price * item.qty), 0);
            const total = subtotal + deliveryCharge;
            
            const paymentMethod = document.querySelector('input[name="payment"]:checked').value;
            
            const orderData = { 
                id: "#KVX" + Date.now().toString().slice(-6), 
                items: [...cart], 
                customer: name, 
                address: address, 
                district: district,
                phone: phone, 
                paymentMethod: paymentMethod,
                deliveryCharge: deliveryCharge,
                subtotal: subtotal,
                total: total,
                date: new Date().toISOString()
            };
            
            let orders = JSON.parse(localStorage.getItem('kavixo_orders')) || [];
            orders.push(orderData);
            localStorage.setItem('kavixo_orders', JSON.stringify(orders));
            
            showNotification(`আপনার অর্ডার (#${orderData.id}) সফলভাবে গ্রহণ করা হয়েছে! মোট: ৳${total}`, 'success');
            
            cart = []; 
            updateCartUI(); 
            document.getElementById('cust-name').value = '';
            document.getElementById('cust-address').value = '';
            document.getElementById('cust-phone').value = '';
            document.getElementById('delivery-district').value = '';
            
            setTimeout(() => {
                showSection('home-section');
            }, 2000);
        }

        // টাইমার
        function startTimer() {
            let time = 8 * 60 * 60 + 45 * 60 + 12;
            const timerElement = document.getElementById('timer');
            
            const updateTimer = () => {
                const hours = Math.floor(time / 3600);
                const minutes = Math.floor((time % 3600) / 60);
                const seconds = time % 60;
                
                timerElement.textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (time > 0) {
                    time--;
                    setTimeout(updateTimer, 1000);
                } else {
                    timerElement.textContent = "সময় শেষ!";
                }
            };
            
            updateTimer();
        }

        // অ্যাপ ইনিশিয়ালাইজেশন
        function initializeApp() {
            loadProducts();
            updateCartUI();
            updateWishlistCount();
            startTimer();
            loadSharedProductFromURL();
            
            document.getElementById('search-input').addEventListener('keyup', searchProducts);
            
            document.getElementById('share-modal').addEventListener('click', function(e) {
                if (e.target.id === 'share-modal') {
                    closeShareModal();
                }
            });
        }

        window.onload = initializeApp;

        window.addEventListener('online', function() {
            showNotification('ইন্টারনেট সংযোগ পুনরুদ্ধার হয়েছে!', 'success');
        });

        window.addEventListener('offline', function() {
            showNotification('ইন্টারনেট সংযোগ নেই। অফলাইন মোডে কাজ চলছে...', 'info');
        });

    </script>
</body>
</html>